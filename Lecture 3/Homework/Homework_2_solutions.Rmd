---
title: "Success of Leader Assassination as a Natural Experiment"
date: "17 January 2017"
output: html_document
---

This version of the QSS instructor key uses tidyverse functions to 
solve assignment 2.8.3 in the QSS textbook. It was adapted by Nora 
Webb Williams to follow the University of Washington PolS 501 course, as
taught by Jeff Arnold in winter 2017. Revisions by Calvin Garner in winter 2018.

One longstanding debate in the study of international relations
concerns the question of whether individual political leaders can make
a difference.  Some emphasize that leaders with different ideologies
and personalities can significantly affect the course of a nation.
Others argue that political leaders are severely constrained by
historical and institutional forces.  Did individuals like Hitler,
Mao, Roosevelt, and Churchill make a big difference?  The difficulty
of empirically testing these arguments stems from the fact that the
change of leadership is not random and there are many confounding
factors to be adjusted for.

In this exercise, we consider a *natural experiment* in which the
success or failure of assassination attempts is assumed to be
essentially random.

This exercise is based on:
Jones, Benjamin F, and Benjamin A Olken. 2009. “[Hit or Miss? 
 The Effect of Assassinations on Institutions and 
 War.](http://dx.doi.org/10.1257/mac.1.2.55)” 
 *American Economic Journal: Macroeconomics* 1(2): 55–87. 

Each observation of the CSV data set
`leaders.csv` contains information about an assassination
attempt.  The variables are:

 Name                 Description
 -------------------- ----------------------------------------------------------
 `country`            The name of the country
 
 `year`               Year of assassination
 
 `leadername`         Name of leader who was targeted
 
 `age`                Age of the targeted leader
 
 `politybefore`       Average polity score during the 3 year period prior to the attempt
 
 `polityafter`        Average polity score during the 3 year period after the attempt
 
 `civilwarbefore`     1 if country is in civil war during the 3 year period prior to the attempt, or 0 
 
 `civilwarafter`      1 if country is in civil war during the 3 year period after the attempt, or 0
 
 `interwarbefore`     1 if country is in international war during the 3 year period prior to the attempt, or 0
 
 `interwarafter`      1 if country is in international war during the 3 year period after the attempt, or 0
 
 `result`             Result of the assassination attempt, one of 10 categories described below

The `polity` variable represents the so-called *polity score*
from the Polity Project.  The Polity Project systematically documents
and quantifies the regime types of all countries in the world from
1800.  The polity score is a 21-point scale ranging from -10
(hereditary monarchy) to 10 (consolidated democracy).  

The `result` variable is a 10 category factor variable describing
the result of each assassination attempt.

## Question 1

How many assassination attempts are recorded in the data?  How
many countries experience at least one leader assassination attempt?
(The `unique` function, which returns a set of unique values
from the input vector, may be useful here).  What is the average
number of such attempts (per year) among these countries?

## Answer 1

```{r}

### Number of assasination attempts
leaders %>%
  nrow()

# or

dim(leaders)

## Another way of counting the number of countries
n_distinct(leaders$country)

## A way of figuring the average number of assasinations per year
nrow(leaders)/n_distinct(leaders$year)

```

The number of assassination attempts in the data is equal to the
number of observations, `r nrow(leaders)`. There are
`r length(unique(leaders$country))` countries in the dataset that
have experienced at least one assassination attempt. The average
number of attempts among all of these countries is equal to the
average number of observations per year in the data,
`r round(mean(table(leaders$year)), 2)`.

## Question 2

Create a new binary variable named `success` that is equal
to 1 if a leader dies from the attack and to 0 if the leader
survives.  Store this new variable as part of the original data
frame.  What is the overall success rate of leader assassination?
Does the result speak to the validity of the assumption that the
success of assassination attempts is randomly determined?

## Answer 2

```{r}
### Tidyverse, without using factors

# Add a variable for success
leaders %>%
  distinct(result) ## See what the possible values are for result

## using mutate to create the success variable
leaders <- 
  leaders %>%
  mutate(success = if_else(leaders$result == lev[1] | leaders$result == lev[2] |
               leaders$result == lev[3] | leaders$result == lev[4], 1, 0))

success.rate <- 
  leaders %>%
  summarize(success.rate = mean(success))
success.rate

```

Assassination attempts are successful
`r round(mean(leaders$success), 3)*100` percent of the time. It is
unclear whether this can validate the assumption that attempts are
randomly determined. It at least validates that not all attempts lead
to the death of the leader.  However, we do not know if other
systematic factors, such as skill of the perpetrator, health of the
leader, or security conditions, might be at work in determining
success and failure of the attempts.

## Question 3

Investigate whether the average polity score over 3 years prior
  to an assassination attempt differs on average between successful
  and failed attempts.  Also, examine whether there is any difference
  in the age of targeted leaders between successful and failed
  attempts.  Briefly interpret the results in light of the validity of
  the aforementioned assumption.

## Answer 3

```{r}
## With Tidyverse
# First group the data by success of assasination attempt
leaders.success <- 
  leaders %>%
  group_by(success)

polity.diff <- 
  leaders.success %>%
  summarize(polity.diff = mean(politybefore))
polity.diff  

age.diff <- 
  leaders.success %>%
  summarize(age.diff = mean(age))
age.diff
```

Prior to the attempt, countries with unsuccessful assassinations were
somewhat less democratic on average than countries with successful
attempts. The age of the leaders was relatively similar, although
countries whose leaders died from the attack had slightly older
leaders. These two findings suggest that there may be some systematic
differences in the types of countries and types of leaders who are
more susceptible to successful assassination attempts, though the
differences may not be large.

## Question 4

Repeat the same analysis as in the previous question, but this
  time using the country's experience of civil and international war.
  Create a new binary variable in the data frame called
  `warbefore`.  Code the variable such that it is equal to 1 if
  a country is in either civil or international war during the 3 years
  prior to an assassination attempt.  Provide a brief interpretation
  of the result.

## Answer 4

```{r}

## Creating a new variable of warprior, in the already grouped data
leaders.success <- 
  leaders.success %>%
  mutate(warprior = if_else(interwarbefore == 1 |
                              civilwarbefore == 1, 1, 0))

prior.war.diff <- summarize(leaders.success,
                            prior.war.diff = mean(warprior))
prior.war.diff

```

Countries with successful attempts were no more or less likely to be
engaged in war prior to the assassination attempt than those with
unsuccessful attempts.  This finding is consistent with the assumption
that the success of assassination attempts is random.

## Question 5

Does successful leader assassination cause democratization?
  Does successful leader assassination lead countries to war?  Answer
  these questions by analyzing the data.  Be sure to state your
  assumptions and provide a brief interpretation of the results.

## Answer 5

```{r}

# could try just comparing polity score after assasination versus non-assasination
# but we might be worried about confounders!

pol.after <- 
  leaders.success %>%
  summarize(pol.after = mean(polityafter))
pol.after

diff.pol.after <- pol.after[2,2] - pol.after [1,2] # polity score after 3 years, success - failure
diff.pol.after
# places with a successful assasination have an average polity score that is 1.13 higher, compared to places with an unsuccessful assasination. This is very high! Let's compare with the diff-in-diff estimate.

## diff-in-diff approach with tidyverse
diff.diff <- 
  leaders.success %>%
  summarize(polity.diff = mean(polityafter) - mean(politybefore))

diff.diff

diff.in.diff.polity <- diff.diff[2,2] - diff.diff[1,2]

diff.in.diff.polity

```

To answer these questions, a difference-in-differences analysis is
conducted. We take the difference in mean polity scores before and
after the assassination attempts for countries with unsuccessful
attempts and subtract this difference from the difference score for
those with successful attempts. The assumption here is that the change
in polity scores for countries with successful attempts would be the
same as the change for those with unsuccessful attempts had their
assassinations not been successful.  The result, while positive, is so
small as to suggest that successful attempts do not cause
democratization.

Using the same difference-in-difference approach, we find
very little difference in the proportion of countries engaged in
war. Leader assassination does not seem to cause countries to engage
in war.

```{r}
### using tidyverse
# creating the warafter variable in leaders.success
leaders.success <- 
  leaders.success %>%
  mutate(warafter = if_else (civilwarafter == 1|
                               interwarafter==1, 1, 0))

## diff-in-diff approach with tidyverse
diff.diff.war <- 
  leaders.success %>%
  summarize(war.diff = mean(warafter) - mean(warprior))

diff.diff.war

diff.in.diff.war <- diff.diff.war[2,2] - diff.diff.war[1,2]

diff.in.diff.war

```
